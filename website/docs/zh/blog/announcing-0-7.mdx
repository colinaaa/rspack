---
date: 2024-05-21 16:00:00
---

import { PackageManagerTabs } from '@theme';

# Rspack v0.7 发布公告

> 2024 年 5 月 21 日

Rspack v0.7 版本支持 lazy compilation，同时，将更多配置和 API 与 webpack 进行了对齐。

## 主要功能更新

### 支持 Lazy Compilation

#### treeShaking 功能达到稳定状态

新版 tree shaking 在 0.4.2 引入，并在 0.6.0 默认开启，经过几个月的 bug 修复和优化，目前已达到稳定状态。

0.7.0 已移除 `builtins.treeShaking` (oldTreeShaking) 配置，将旧的 tree shaking 功能彻底下线。

## 不兼容更新

Rspack 会在 1.0 版本前，逐步下线所有不稳定的 API 和配置，更多配置 / API / 默认行为将与 webpack 保持一致。

### 移除一些不稳定的 JavaScript API

### 移除 builtins.treeShaking (oldTreeShaking)

### 移除 resolve.browserField

该配置为 `resolve.aliasFields = ["browser"]` 的简写，由于 Rspack 已经支持 `resolve.aliasFields`，所以不再需要该配置。

### 移除 experiments.newSplitChunks

该配置用于开启新的 splitChunks 实现，由于 Rspack 已经默认使用新的 splitChunks 实现，所以不再需要该配置。

### 移除 generator.css.exportsConvention

该配置用于控制 experiments.css 的 CSS 模块导出的命名形式，仅对于模块类型为 `css/module` 的模块才会有导出，对于模块类型为 `css` 的模块并不存在导出，所以不需要该配置。

### 升级 SWC 到 0.91.x

升级 Rust crate `swc_core` 到 `0.91.x`，这会对使用 SWC Wasm 插件的用户产生影响。

## 迁移指南

### 升级 SWC 插件

在 `0.7.0` 中，Rust crate `swc_core` 的版本升级到 `0.91.x`，使用到的 swc wasm 插件需要确保其使用的 `swc_core` 的版本一致性，否则可能产生无法预知的问题。

详情请参考[文档](https://swc.rs/docs/plugin/selecting-swc-core#091x)。

### 替换 resolve.browserField 为 resolve.aliasFields

如果你之前配置了 `resolve.browserField`，则需要使用 `resolve.aliasFields` 进行替换：

- `resolve.browserField = true` 替换为 `resolve.aliasFields = ["browser"]`
- `resolve.browserField = false` 替换为 `resolve.aliasFields = []`

### 移除 generator.css.exportsConvention

如果你之前配置了 `module.generator.css.exportsConvention` 或在 `module.rule` 中配置了 `generator.exportsConvention`，只需要删除该配置即可。
